<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EV Hub – System Architecture</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f8f9fa;
            line-height: 1.7;
        }
        .section {
            background: #ffffff;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        svg {
            margin-top: 1rem;
        }
    </style>
</head>

<body>

<div class="container py-5">

    <!-- TITLE -->
    <div class="section text-center">
        <h1>System Architecture</h1>
        <h5 class="text-muted">EV Hub – MSc Computing Science</h5>
    </div>

    <!-- SECTION 4 -->
    <div class="section">
        <h2>4. System Architecture</h2>
        <p>
            EV Hub follows a distributed client–server architecture with a clear
            separation of concerns between presentation and data-processing
            layers. The system is composed of a Django-based web application and
            a Flask-based REST API communicating over HTTP.
        </p>
    </div>

    <!-- 4.1 HIGH-LEVEL ARCHITECTURE -->
    <div class="section">
        <h3>4.1 High-Level Architecture</h3>
        <p>
            The high-level architecture of EV Hub consists of three primary
            components: the client web browser, the Django web application, and
            the Flask REST API. The browser interacts exclusively with Django,
            while Django communicates with the Flask API to retrieve vehicle data
            and perform range feasibility calculations.
        </p>

        <!-- DIAGRAM 1 -->
        <svg width="100%" height="260" viewBox="0 0 900 260"
             xmlns="http://www.w3.org/2000/svg"
             style="background:#f8f9fa; border-radius:10px;">

            <rect x="40" y="90" width="200" height="80" rx="12" fill="#ffffff" stroke="#000"/>
            <text x="140" y="125" text-anchor="middle" font-size="14" font-weight="bold">
                Web Browser
            </text>
            <text x="140" y="145" text-anchor="middle" font-size="12">
                User Interface
            </text>

            <rect x="350" y="60" width="220" height="120" rx="12" fill="#e7f1ff" stroke="#000"/>
            <text x="460" y="105" text-anchor="middle" font-size="14" font-weight="bold">
                Django Web Application
            </text>
            <text x="460" y="125" text-anchor="middle" font-size="12">
                Views • Templates • Routing
            </text>
            <text x="460" y="145" text-anchor="middle" font-size="12">
                Port 8000
            </text>

            <rect x="680" y="60" width="200" height="120" rx="12" fill="#e8fff3" stroke="#000"/>
            <text x="780" y="105" text-anchor="middle" font-size="14" font-weight="bold">
                Flask REST API
            </text>
            <text x="780" y="125" text-anchor="middle" font-size="12">
                Data & Range Logic
            </text>
            <text x="780" y="145" text-anchor="middle" font-size="12">
                Port 5000
            </text>

            <line x1="240" y1="130" x2="350" y2="130" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>
            <line x1="570" y1="130" x2="680" y2="130" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>

            <defs>
                <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="3"
                        orient="auto" markerUnits="strokeWidth">
                    <path d="M0,0 L0,6 L9,3 z" fill="#000"/>
                </marker>
            </defs>
        </svg>
    </div>

    <!-- 4.2 REQUEST FLOW -->
    <div class="section">
        <h3>4.2 Request and Data Flow</h3>
        <p>
            When a user initiates a request through the web interface, the
            request is first handled by the Django application. Django then
            issues an HTTP request to the Flask REST API. The Flask API processes
            the request and returns a JSON response, which Django parses and
            renders into an HTML response for the user.
        </p>

        <!-- DIAGRAM 2 -->
        <svg width="100%" height="300" viewBox="0 0 900 300"
             xmlns="http://www.w3.org/2000/svg"
             style="background:#f8f9fa; border-radius:10px;">

            <rect x="60" y="110" width="180" height="80" rx="12" fill="#ffffff" stroke="#000"/>
            <text x="150" y="145" text-anchor="middle" font-size="13" font-weight="bold">
                Client Request
            </text>
            <text x="150" y="165" text-anchor="middle" font-size="12">
                HTTP Request
            </text>

            <rect x="350" y="90" width="220" height="120" rx="12" fill="#e7f1ff" stroke="#000"/>
            <text x="460" y="120" text-anchor="middle" font-size="14" font-weight="bold">
                Django View
            </text>
            <text x="460" y="145" text-anchor="middle" font-size="12">
                requests.get()
            </text>
            <text x="460" y="165" text-anchor="middle" font-size="12">
                JSON Parsing
            </text>

            <rect x="680" y="90" width="200" height="120" rx="12" fill="#e8fff3" stroke="#000"/>
            <text x="780" y="120" text-anchor="middle" font-size="14" font-weight="bold">
                Flask Endpoint
            </text>
            <text x="780" y="145" text-anchor="middle" font-size="12">
                API Response
            </text>

            <line x1="240" y1="150" x2="350" y2="150" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>
            <line x1="570" y1="150" x2="680" y2="150" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>
            <line x1="680" y1="190" x2="570" y2="190" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>
            <line x1="350" y1="190" x2="240" y2="190" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>

            <defs>
                <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="3"
                        orient="auto" markerUnits="strokeWidth">
                    <path d="M0,0 L0,6 L9,3 z" fill="#000"/>
                </marker>
            </defs>
        </svg>
    </div>

</div>

</body>
</html>
